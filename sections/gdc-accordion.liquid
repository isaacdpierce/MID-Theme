{% comment %}
  USING alpine.js https://alpinejs.dev/start-here
{% endcomment %}

<div class="gdc-accordion__wrapper section--{{ section.id }}">
  {%- for block in section.blocks -%}
    {% if block.type == 'accordion_section' %}

      <div x-data="{ open: false }">
        <div @click="open = ! open" class="gdc-accordion__button">
          <span  class="gdc-accordion__indicator" x-show="open">-</span>
          <span  class="gdc-accordion__indicator" x-show="!open">+</span>
          <h2 class="gdc-accordion__title">{{ block.settings.title }}</h2>
        </div>
        
        <div class="gdc-accordion__contents" x-show="open">{{ block.settings.content }}</div>
      </div>
    {%- endif -%}
  {% endfor %}
</div>

<style>
  .gdc-accordion__wrapper {
    width: 900px;
    max-width: 90vw;
    margin: 0 auto;
  }

  .gdc-accordion__button {
    display: flex;
    align-items: center;
    width: 100%;
    padding: 20px 0 0 0;
  }

  .gdc-accordion__indicator {
    font-size: 45px;
    width: 40px;
    color: {{ block.settings.ind_color }};
    transform: translateY(-5px);
  }

  .gdc-accordion__title {
    flex-grow: 1;
    padding-bottom: 5px;
    border-bottom: 1px solid #999;
    color: {{ block.settings.tab_text_color }};
  }

  .gdc-accordion__contents {
    padding-left: 40px;
  }

  .gdc-accordion__contents p {
    margin: 0 !important;
    padding-bottom: 40px;
    color: {{ block.settings.content_text_color }};
  }
</style>

{% schema %}
{
  "name": "GDC: Accordion",
  "settings": [
    {
      "type": "header",
      "content": "Accordion Style Settings"
    },
    {
      "type": "color",
      "id": "ind_color",
      "label": "Indicator Color"
    },
    {
      "type": "color",
      "id": "tab_color",
      "label": "Tab Color"
    },
    {
      "type": "color",
      "id": "tab_text_color",
      "label": "Tab Font Color"
    },
    {
      "type": "color",
      "id": "content_text_color",
      "label": "Content Color"
    }
  ],
  "blocks": [
    {
      "type": "accordion_section",
      "name": "Accordion Section",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "default": "Title", 
          "label": "Title"
        },
        {
          "type": "richtext",
          "id": "content",
          "default": "<p>Content...</p>",  
          "label": "Content"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "GDC: Accordion",
      "category": "GDC Custom Components"
    }
  ]
}
{% endschema %}