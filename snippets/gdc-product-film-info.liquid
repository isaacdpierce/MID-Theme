{%- liquid 
  assign info = product.metafields.film_info
  assign closed_captions = "No"

  assign filmmakers_array = info.film_maker.value | split: ',' 
  assign subjects_array = info.subjects.value | split: ',' 
  assign awards_array = info.highlights_and_awards.value | split: ',' 
  assign availability_array  = info.availability.value | split: ',' 
  assign institutions_array  = info.institutions.value | split: ',' 
  assign formats_array = info.formats.value | split: ',' 

  if info.closed_captions.value == true 
    assign closed_captions = "Yes"
  endif

-%}


<div class="gdc-product-metafields">

  <h2 class="gdc-product-metafields__section gdc-product-metafields__subtitle">
    {% for filmmaker in filmmakers_array %}
      <span>{{ filmmaker }}</span>
    {% endfor %}
  </h2>

  <div class="gdc-product-metafields__section gdc-product-metafields__horizontal-list">
    {% for subject in subjects_array %}
      <span>{{ subject }}</span>
    {% endfor %}
  </div>

  <ul class="gdc-product-metafields__section">
    {% if info.release_date.value != blank %}
      <li>Release Date <span>{{ info.release_date.value }}</span></li>
    {% endif %}
    {% if info.running_time.value != blank %}
      <li>Running Time <span>{{ info.running_time.value }}</span></li>
    {% endif %}
    {% if info.closed_captions.value != blank %}
      <li>Closed Captions 
        <span>{{ closed_captions }}</span>
      </li>
    {% endif %}
    {% if info.availability.value != blank %}
      <li>Availability 
        <span>
        {% for country in availability_array %}
          {{ country }}
        {% endfor %}
        </span>
      </li>
    {% endif %}
    {% if info.highlights_and_awards.value != blank %}
      <li>Hightlights / Awards
        <span>
          {% for award in awards_array %}
            {{ award }}
          {% endfor %}
        </span>
      </li>
    {% endif %}
  </ul>

  <div class="gdc-product-metafields__section">
    {% if info.institutions.value != blank %}
      <div>
        <h4>Institutions</h4>
        <select class="gdc-product-metafields__select" name="institutions" id="institutions">
          {% for institution in institutions_array %}
          <option value="{{ institution }}">{{ institution }}</option>
          {% endfor %}
        </select>
      </div>
    {% endif %}
    
    {% if info.formats.value != blank %}
      <div>
        <h4>Formats</h4>
        <select class="gdc-product-metafields__select" name="formats" id="formats">
          {% for format in formats_array %}
          <option value="{{ format }}">{{ format }}</option>
          {% endfor %}
        </select>
      </div>
    {% endif %}
  </div>
</div>

<style>
  .gdc-product-metafields {
    margin: 0;
  }

  .gdc-product-metafields h2 {
    font-size: 16px;
  }

  .gdc-product-metafields__section {
    margin-bottom: 40px !important;
  }

  .gdc-product-metafields__subtitle {
    margin: 0;
  }

  .gdc-product-metafields__horizontal-list span {
    margin-right: 20px;
  }
  
  .gdc-product-metafields ul {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  
  .gdc-product-metafields ul li {
    display: flex;
    justify-content: space-between;
    padding: 0 5px;
    font-size: 14px;
  }
  
  .gdc-product-metafields ul li:nth-child(odd) {
    background-color: #EEEEEE;
  }
  
  .gdc-product-metafields__select {
    padding: 10px;
    width: 100%;
  }

  .gdc-product-metafields__select:focus {
    outline: none;
    outline-offset: 0;
    box-shadow: none;
  }
</style>